<!-- 加载定制样式 >>>>>>>>>>>>> -->
<link rel="stylesheet" href="<$ static $>/mdb/css/font-awesome.min.css?v=6.0.0" />
<link rel="stylesheet" href="<$ static $>/mdb/css/roboto-font.css?family=Roboto:300,400,500,700&display=swap" />
<link rel="stylesheet" href="<$ static $>/mdbootstrap/MDB5-Pro-Advanced_4.4.0.min.css"/>
<link rel="stylesheet" href="<$ static $>/mdbootstrap/MDB5-Pro-Advanced_4.4.0.all.min.css"/>
{% include 'util/jianghu/jianghuDocCss.html' %}
<style>
  /* common >>>>>>>>>>>>> */
  .jianghu-doc-contentDoc{
    padding: 0;
  }
  .jianghu-content{
    max-width: 1376px;
    margin: 0 auto;
  }
  /* <<<<<<<<<<<<< common */

  /* 左侧目录 >>>>>>>>>>>>> */
  .jianghu-doc-sidebar-nav{
    margin-top: 0;
    padding-top: 14px;
  }
  .sidenav{
    position: relative !important;
    box-shadow: none;
    width: var(--vp-sidebar-width-small) !important;
  }
  .sidenav-link{
    font-size: 14px;
    font-weight: 600;
    color: #333333;
    display: block;
    height: auto;
  }
  .sidenav-link i{
    position: relative;
    display: none;
    margin-left: 8px;
    color: #333333;
  }
  .sidenav-collapse .sidenav-link{
    font-size: 14px;
    font-weight: 400;
    color: #5E6278;
    height: 20px;
    margin-top: 10px;
  }
  .sidenav-collapse .jianghu-active{
    color: var(--vt-c-brand) !important;
  }
  .sidenav-menu>.sidenav-item{
    margin-top: 30px;
  }
  .sidenav-collapse{
    margin-top: 14px;
  }
  .sidenav-primary .sidenav-item .sidenav-link:hover, .sidenav-primary .sidenav-link:active, .sidenav-primary .sidenav-link:focus{
    background-color: #fff;
  }
  /* <<<<<<<<<<<<< 左侧目录 */

  /* 生态 >>>>>>>>>>>>> */
  .jianghu-ecosystem{
    background: #FFFFFF;
    padding: 40px 0;
    margin: 0 32px;
  }
  .jianghu-ecosystem .jianghu-row{
    margin: 30px 0;
  }
  .jianghu-ecosystem .jianghu-row:nth-child(1){
    margin-top: 0;
  }
  .jianghu-ecosystem .jianghu-title{
    font-size: 20px;
    font-weight: 600;
    color: #333333;
    margin-bottom: 8px;
  }
  .jianghu-ecosystem .jianghu-image{
    width: 36px;
  }
  .jianghu-ecosystem .jianghu-text{
    padding: 15px;
    width: 100%;
    background: #FFFFFF;
    box-shadow: 0px 5px 6px 0px rgba(0,0,0,0.05);
    border-radius: 8px 8px 8px 8px;
    min-height: 100px;
  }
  .jianghu-ecosystem .jianghu-text:hover{
    box-shadow: 0px 10px 12px 0px rgba(0,0,0,0.05);
  }
  .jianghu-ecosystem .jianghu-text:nth-child(4n){
    margin-right: 0;
  }
  .jianghu-ecosystem .jianghu-text-1{
    font-size: 16px;
    font-weight: 600;
    color: #333;
  }
  .jianghu-ecosystem .jianghu-text-2{
    font-size: 13px;
    font-weight: 400;
    color: #666666;
    max-height: 48px;
    line-height: 24px;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
  }
  .jianghu-ecosystem .jianghu-text-3{
    font-size: 13px;
    font-weight: 500;
    color: #333333;
  }
  .jianghu-ecosystem .jianghu-text-4{
    font-size: 13px;
    font-weight: 400;
    color: #666666;
    position: relative;
  }
  .jianghu-ecosystem .jianghu-text-4 i{
    position: absolute;
    right: 0;
    top: 6px;
    color: #cbcbcb;
    font-size: 10px;
  }
  .jianghu-ecosystem .jianghu-wrapper-1{
    height: 48px;
  }
  .jianghu-ecosystem .jianghu-nodata-image{
    width: 72px;
  }
  .jianghu-ecosystem .jianghu-nodata-text{
    font-size: 14px;
    color: rgba(102,102,102,0.4);
    font-weight: 400;
  }
  .jianghu-collapse-icon {
    font-size: 13px;
    color: var(--mdb-gray-500);
    transition: all .5s;
  }
  .jianghu-catalog-content-has-sidebar {
    position: relative;
  }
  .jianghu-catalog-content-has-sidebar .spread {
    position: absolute;
    right: 0;
    top: 3px;
    cursor: pointer;
    color: #333333;
  }
  /* <<<<<<<<<<<<< 生态 */
  
  /* 展开全部课程 >>>>>>>>>>>>> */
  .jh-spread-mobile{
    display: none;
  }
  /* <<<<<<<<<<<<< 展开全部课程 */

  /* 移动端适配 >>>>>>>>>>>>> */
  @media (max-width: 768px){
    .jianghu-ecosystem{
      padding: 20px 0 40px;
    }
    .jianghu-ecosystem .jianghu-title{
      font-size: 22px;
    }
    .jianghu-ecosystem .jianghu-text-1{
      font-size: 18px;
    }
    .jh-spread-pc{
      display: none;
    }
    .jh-spread-mobile{
      display: block;
    }
  }
  @media (min-width: 1440px) {
    .jianghu-catalog-content-has-sidebar {
      padding-left: calc((100vw - var(--vp-screen-max-width)) / 2 + var(--vp-sidebar-width-small)) ;
      padding-right: calc((100% - var(--vp-screen-max-width)) / 2);
      padding-top: 0;
    }
    .jianghu-catalog-content-has-sidebar .spread {
      right: calc((100% - var(--vp-screen-max-width)) / 2);
    }
  }
  @media (min-width: 1250px){
    .jianghu-catalog-content-has-sidebar {
        padding-top: 0;
    }
  }
  /* <<<<<<<<<<<<< 移动端适配 */
</style>
<!-- <<<<<<<<<<<<< 加载定制样式 -->

<!-- 手机端顶部菜单 >>>>>>>>>>>>> -->
<div class="VPLocalNav">
  <button id="jianghu-mobile-toggle-docMenu" class="jianghu-nav-mobile-menu" aria-expanded="false"
          aria-controls="VPSidebarNav">
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24"
         class="jianghu-nav-mobile-menu-icon">
      <path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path>
      <path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path>
      <path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path>
      <path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path>
    </svg>
    <span class="jianghu-nav-mobile-menu-text">Menu</span>
  </button>
  <button class="jianghu-nav-mobile-menu">
    <!-- 展开全部课程-移动端  -->
    <span class="spread jh-spread-mobile">
      <i class="far fa-solid fa-plus jianghu-collapse-icon" aria-hidden="true"></i>
      <span class="jianghu-text-3">展开全部课程</span>
    </span>
  </button>
</div>
<!-- <<<<<<<<<<<<< 手机端顶部菜单 -->
  
<!-- 内容区 >>>>>>>>>>>>> -->
<main>
  <div class="jianghu-doc-content">
    <div class="jianghu-doc-contentDoc">

      <!-- 左侧目录 >>>>>>>>>>>>> -->
      <div class="jianghu-doc-sidebar">
        <div class="jianghu-doc-sidebar-nav">
          <nav > 
            {% for data in xfPage.xfPageConfig.catalog %}
            <ul class="sidenav-menu">
              <li class="sidenav-item">
                <a class="sidenav-link p-0" ><span><$ data.category $></span></a>
                <ul class="sidenav-collapse show">
                  {% for node in data.list %}
                  <li class="sidenav-item">
                    <a class="sidenav-link p-0" href="#<$ node $>"><$ node $></a>
                  </li>
                  {% endfor %}
                </ul>
              </li>
            </ul>
            {% endfor %}
          </nav>
        </div>
      </div>
      <!-- <<<<<<<<<<<<< 左侧目录 -->
      
      <!-- 生态 -->
      <div class="jianghu-ecosystem">
        <div class="jianghu-doc-content jianghu-doc-content-has-sidebar jianghu-catalog-content-has-sidebar">

          {% for item in xfPage.xfPageConfig.catalog %}
          {% set itemIndex = loop.index %}
          {% for group in item.listData %}
          {% set groupIndex = loop.index %}
          <div class="jianghu-row" id="lesson-<$  groupIndex $>">
            <div class="jianghu-title" data-group="<$ group.categoryGroup $>"><$ group.label $></div>
            {% if group.categoryList.length > 0 %}
            <div class="row g-4">
              {% for category in group.categoryList %}
              {% set categoryIndex = loop.index %}
              <div class="col-12 col-sm-6 col-md-6 col-lg-4 col-xl-3">
                <div class="jianghu-text"> 
                  <div id="category-<$ itemIndex $>-<$ groupIndex $>-<$  categoryIndex $>" data-mdb-toggle="collapse"  data-mdb-target="#collapse-<$ itemIndex $>-<$ groupIndex $>-<$  categoryIndex $>" aria-expanded="false" style="cursor: pointer;">
                    <div class="d-flex justify-content-between align-items-center">
                      <span class="jianghu-text-1 mb-0"><$ category.categoryName $></span>
                      <i class="far fa-solid fa-plus jianghu-collapse-icon" aria-hidden="true"></i>
                    </div>
                    <div class="jianghu-wrapper-1 mt-2 d-flex align-items-center">
                      <img src="<$ seoResource $>/image/icon/<$ category.categoryName $>.png" onerror="this.src='<$ seoResource $>/image/icon/default.png'" class="jianghu-image me-2 img-fluid"/>
                      <div class="jianghu-text-2"><$ category.categoryIntro $></div>
                    </div>
                  </div>

                  {% if category.articleList.length > 0 %}
                  <div class="collapse" id="collapse-<$ itemIndex $>-<$ groupIndex $>-<$  categoryIndex $>" aria-labelledby="category-<$ itemIndex $>-<$ groupIndex $>-<$  categoryIndex $>">
                    <div class="mt-3">
                      {% for article in category.articleList %}
                      <a href="/<$ appId $>/page/article/<$ article.articleId $>">
                        <div class="mb-0 jianghu-text-4 text-truncate">
                          <span class="jianghu-text-3 font-monospace"><$ article.articleTitleMap.prefix $>：</span>
                          <$ article.articleTitleMap.text $>
                          {% if article.articlePublishStatus == 'login' and not userId %}
                          <i class="far fa-solid fa-lock" aria-hidden="true"></i>
                          {% endif %}
                        </div>
                      </a>
                      {% endfor %}
                    </div>
                  </div>
                  {% endif %}
                </div>
              </div>
              {% endfor %}
            </div>
            {% else %}
            <div class="ms-3 mt-2">
              <div class="text-center d-inline-block">
                <img src="<$ seoResource $>/image/icon/noData.png" class="jianghu-nodata-image img-fluid"/>
                <div class="jianghu-nodata-text">暂无课程</div>
              </div>
            </div>
            {% endif %}
          </div>
          {% endfor %}
          {% endfor %}
          
          <!-- 展开全部课程-PC  -->
          <span class="spread jh-spread-pc">
            <i class="far fa-solid fa-plus jianghu-collapse-icon" aria-hidden="true"></i>
            <span class="jianghu-text-3">展开全部课程</span>
          </span>
        </div>
      </div>
    </div>
  </div>
</main>
<!-- <<<<<<<<<<<<< 内容区 -->

<!-- 加载定制js >>>>>>>>>>>>> -->
<script type="text/javascript" src="<$ static $>/mdbootstrap/MDB5-Pro-Advanced_4.4.0.mdb.min.js"></script>
<script type="text/javascript" src="<$ static $>/mdbootstrap/MDB5-Pro-Advanced_4.4.0.all.min.js"></script>
<script type='text/javascript'>
  $(function () {
    // 展开收起全部课程
    let spread = 'close';
    $('.spread').on('click', function () {
      const list = $('.collapse');
      if (spread === 'open') {
        list.each(function () {
          $(this).removeClass('show');
          $(this).prev().addClass('collapsed');
          $(this).prev().find('.fa-minus').removeClass('fa-minus').addClass('fa-plus');
        })
        $(this).find('span').text('展开全部课程');
        $(this).find('.fa-minus').removeClass('fa-minus').addClass('fa-plus');
        spread = 'close';
      } else {
        list.each(function () {
          $(this).addClass('show');
          $(this).prev().removeClass('collapsed');
          $(this).prev().find('.fa-plus').removeClass('fa-plus').addClass('fa-minus');
        })
        $(this).find('span').text('收起全部课程');
        $(this).find('.fa-plus').removeClass('fa-plus').addClass('fa-minus');
        spread = 'open';
      }
    })

    // 单个展开收起切换 icon
    $('.collapse').on('show.bs.collapse', function () {
      $(this).prev().find('.fa-plus').removeClass('fa-plus').addClass('fa-minus');
    }).on('hide.bs.collapse', function () {
      $(this).prev().find('.fa-minus').removeClass('fa-minus').addClass('fa-plus');
    });

    // 目录滚动到指定位置
    $('.sidenav-collapse .sidenav-link').click(function () {
      const text = $(this).text();
      const link = $('.jianghu-title').filter(function () {
        return text.includes($(this).data('group'));
      });
      const offsetTop = link.offset().top;
      $('html').scrollTop(offsetTop - 100);

      // active
      $('.sidenav-collapse .sidenav-link').removeClass('jianghu-active');
      $(this).addClass('active');
      return false
    })
    // 第一个 active
    $('.sidenav-collapse .sidenav-link').eq(0).addClass('jianghu-active');
  })
</script>
<!-- <<<<<<<<<<<<< 加载定制js -->
